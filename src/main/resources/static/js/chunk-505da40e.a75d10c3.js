(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-505da40e"],{"0b42":function(t,e,a){var s=a("da84"),i=a("e8b5"),n=a("68ee"),r=a("861d"),o=a("b622"),c=o("species"),l=s.Array;t.exports=function(t){var e;return i(t)&&(e=t.constructor,n(e)&&(e===l||i(e.prototype))?e=void 0:r(e)&&(e=e[c],null===e&&(e=void 0))),void 0===e?l:e}},"1d92":function(t,e,a){"use strict";a("cd75")},"1dde":function(t,e,a){var s=a("d039"),i=a("b622"),n=a("2d00"),r=i("species");t.exports=function(t){return n>=51||!s((function(){var e=[],a=e.constructor={};return a[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"284b":function(t,e,a){"use strict";a("d3b7");var s=a("bc3a"),i=a.n(s),n=a("a18c"),r=a("5c96"),o=i.a.create({baseURL:"http://e7s6ux.natappfree.cc"});o.interceptors.request.use((function(t){var e=localStorage.getItem("token");return e?t.headers.token=e:n["a"].push("/login"),t}),(function(t){return Promise.reject(t)})),o.interceptors.response.use((function(t){if(t.data.code)switch(t.data.code){case 4004:window.localStorage.removeItem("token"),window.localStorage.removeItem("info"),n["a"].push("/login").catch((function(t){console.log(t)}));break;case 4003:Object(r["Message"])({showClose:!0,message:"权限不足",type:"warning"});break}return t}),(function(t){return Promise.reject(t.response.status)})),e["a"]=o},"4de4":function(t,e,a){"use strict";var s=a("23e7"),i=a("b727").filter,n=a("1dde"),r=n("filter");s({target:"Array",proto:!0,forced:!r},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"65f0":function(t,e,a){var s=a("0b42");t.exports=function(t,e){return new(s(t))(0===e?0:e)}},"8e99":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new_task"},[a("div",[a("el-steps",{attrs:{active:t.activeStep,"align-center":""}},[a("el-step",{attrs:{title:"步骤 1",description:"任务基本信息"}}),a("el-step",{attrs:{title:"步骤 2",description:"选择任务选项"}}),a("el-step",{attrs:{title:"步骤 3",description:"选择任务对象"}}),a("el-step",{attrs:{title:"步骤 4",description:"选择任务截至时间"}}),a("el-step",{attrs:{title:"步骤 5",description:"完成,发布任务"}})],1),a("el-divider")],1),a("div",{staticClass:"new_task"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.activeStep,expression:"activeStep == 1"}],staticClass:"new_task_1"},[1==t.activeStep?a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.taskForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"任务名称:",prop:"taskName"}},[a("el-input",{model:{value:t.taskForm.taskName,callback:function(e){t.$set(t.taskForm,"taskName",e)},expression:"taskForm.taskName"}})],1),a("el-form-item",{attrs:{label:"任务是否可分发:",prop:"taskName"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.taskForm.canDivide,callback:function(e){t.$set(t.taskForm,"canDivide",e)},expression:"taskForm.canDivide"}})],1),a("el-form-item",[a("el-button",{attrs:{disabled:!(t.taskForm.taskName.length>2&&t.taskForm.taskName.length<20),type:"primary"},on:{click:function(e){t.activeStep=2}}},[t._v("下一步 ")])],1)],1):t._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.activeStep,expression:"activeStep == 2"}],staticClass:"new_task_2"},[a("el-transfer",{attrs:{data:t.itemData,props:{key:"taskItemId",label:"taskItemName"},titles:["所有选项","已选择选项"]},model:{value:t.taskForm.taskOwnItem,callback:function(e){t.$set(t.taskForm,"taskOwnItem",e)},expression:"taskForm.taskOwnItem"}}),a("div",{staticClass:"new_task_2_1"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.activeStep=1}}},[t._v("上一步")]),a("el-button",{attrs:{type:"success",disabled:!t.taskForm.taskOwnItem.length>0},on:{click:function(e){t.activeStep=3}}},[t._v("下一步")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3==t.activeStep,expression:"activeStep == 3"}],staticClass:"new_task_3"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"根据用户选择",name:"byUser"}},[a("div",{staticClass:"new_task_3_1_1"},[a("el-transfer",{attrs:{props:{key:"myUserId",label:"realName"},filterable:"","filter-placeholder":"请输入姓名",titles:["所有人员","已选择人员"],data:t.userData},model:{value:t.taskForm.taskPerson,callback:function(e){t.$set(t.taskForm,"taskPerson",e)},expression:"taskForm.taskPerson"}})],1)]),a("el-tab-pane",{attrs:{label:"根据角色选择",name:"byRole"}},[a("div",{staticStyle:{display:"flex",width:"600px",height:"500px"}},[a("div",{staticStyle:{flex:"1","border-right":"gray solid 1px",padding:"10px"}},[a("el-checkbox-group",{on:{change:t.roleChange},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},t._l(t.roles,(function(e){return a("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.name))])})),1)],1),a("div",{staticStyle:{flex:"1",padding:"10px"}},t._l(t.persons,(function(e){return a("el-tag",{key:e.baseInfoId},[t._v(t._s(e.realName))])})),1)])])],1),a("div",{staticClass:"new_task_3_1_2"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.activeStep=2}}},[t._v("上一步")]),a("el-button",{attrs:{type:"success",disabled:1==t.taskForm.type&&t.taskForm.taskPerson<1||2==t.taskForm.type&&t.taskForm.taskPerson2<1},on:{click:function(e){t.activeStep=4}}},[t._v("下一步")])],1)],1),4==t.activeStep?a("div",{staticClass:"new_task_3"},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("h4",[t._v("选择任务截至时间:")]),a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间","default-time":"23:59:59","value-format":"yyyy-MM-dd HH:mm:ss",align:"right","picker-options":t.pickerOptions},model:{value:t.taskForm.untilTime,callback:function(e){t.$set(t.taskForm,"untilTime",e)},expression:"taskForm.untilTime"}})],1),a("div",{staticClass:"new_task_4_3"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.activeStep=3}}},[t._v("上一步")]),a("el-button",{attrs:{type:"success",disabled:""==t.taskForm.untilTime},on:{click:function(e){t.activeStep=5}}},[t._v("下一步")])],1)]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:5==t.activeStep,expression:"activeStep == 5"}],staticClass:"new_task_3"},[t._m(0),a("div",{staticClass:"new_task_3_2"},[a("el-descriptions",{attrs:{title:"任务信息"}},[a("el-descriptions-item",{attrs:{label:"任务名称"}},[t._v(t._s(t.taskForm.taskName))]),a("el-descriptions-item",{attrs:{label:"任务是否可分发"}},[t._v(t._s(t.taskForm.canDivide?"可分发":"不可分发"))]),a("el-descriptions-item",{attrs:{label:"任务对象"}},[t._v(t._s(1==t.taskForm.type?t.selectUserName.join(","):t.persons.map((function(t){return t.realName})).join(",")))]),a("el-descriptions-item",{attrs:{label:"任务项"}},[t._v(t._s(t.selectItemName.join(","))+" ")]),a("el-descriptions-item",{attrs:{label:"任务截至时间"}},[t._v(t._s(t.taskForm.untilTime)+" ")])],1)],1),a("div",{staticClass:"new_task_4_3"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.activeStep=4}}},[t._v("上一步")]),a("el-button",{attrs:{type:"success"},on:{click:t.submitTask}},[t._v("确认发布任务")])],1)]),6==t.activeStep?a("div",[a("el-result",{attrs:{icon:"success",title:"发布成功",subTitle:"你已经成功发布一个任务,请等待任务完成"}})],1):t._e()])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new_task_4_1"},[a("h2",[t._v("所有步骤已经就绪,请确认以下任务信息")])])}],n=(a("b0c0"),a("d81d"),a("4de4"),a("d3b7"),a("284b")),r={data:function(){return{taskForm:{taskName:"",canDivide:!1,taskOwnItem:[],taskPerson:[],taskPerson2:[],type:1,untilTime:""},activeStep:1,itemData:[],userData:[],isCommit:!1,activeName:"byUser",checkList:[],persons:[],roles:[],pickerOptions:{disabledDate:function(t){var e=new Date;return e.getTime()>=t.getTime()},shortcuts:[{text:"明天",onClick:function(t){var e=new Date;e.setTime(e.getTime()+864e5),e.setHours(23),e.setSeconds(59),e.setMinutes(59),t.$emit("pick",e)}},{text:"后天",onClick:function(t){var e=new Date;e.setTime(e.getTime()+1728e5),e.setHours(23),e.setSeconds(59),e.setMinutes(59),t.$emit("pick",e)}},{text:"一周后",onClick:function(t){var e=new Date;e.setTime(e.getTime()+6048e5),e.setHours(23),e.setSeconds(59),e.setMinutes(59),t.$emit("pick",e)}},{text:"30天后",onClick:function(t){var e=new Date;e.setTime(e.getTime()+2592e6),e.setHours(23),e.setSeconds(59),e.setMinutes(59),t.$emit("pick",e)}}]}}},methods:{getItem:function(){var t=this;n["a"].get("/task/getItem").then((function(e){t.itemData=e.data.data})).catch((function(t){console.log(t)}))},getUser:function(){var t=this;n["a"].post("/user/getUserByDeptId",[]).then((function(e){e.data.data&&(t.userData=e.data.data)}))},submitTask:function(){var t=this;n["a"].post("/task/newTask",this.taskForm).then((function(e){200==e.data.code&&(t.activeStep=6,t.taskForm={taskName:"",canDivide:!1,taskOwnItem:[],taskPerson:[],taskPerson2:[],type:1,untilTime:""})}))},handleClick:function(t){this.activeName=t.name,"byUser"==t.name?this.taskForm.type=1:this.taskForm.type=2},roleChange:function(t){var e=this;n["a"].post("/user/getUserByRole",{roleIds:t}).then((function(t){200==t.data.code?(e.persons=t.data.data,e.taskForm.taskPerson2=e.persons.map((function(t){return t.myUserId}))):e.$message.error(t.data.message)})).catch((function(t){console.log(t)}))},getDownRole:function(){var t=this;n["a"].get("/role/getDownRole").then((function(e){200==e.data.code?t.roles=e.data.data:t.$message.error(e.data.message)})).catch((function(t){console.log(t)}))}},computed:{selectUserName:function(){var t=this;return this.taskForm.taskPerson.map((function(e){return t.userData.filter((function(t){return t.myUserId==e}))[0].realName}))},selectItemName:function(){var t=this;return this.taskForm.taskOwnItem.map((function(e){return t.itemData.filter((function(t){return t.taskItemId==e}))[0].taskItemName}))}},created:function(){this.getItem(),this.getUser(),this.getDownRole()}},o=r,c=(a("1d92"),a("2877")),l=Object(c["a"])(o,s,i,!1,null,"5a518734",null);e["default"]=l.exports},b0c0:function(t,e,a){var s=a("83ab"),i=a("5e77").EXISTS,n=a("e330"),r=a("9bf2").f,o=Function.prototype,c=n(o.toString),l=/^\s*function ([^ (]*)/,u=n(l.exec),m="name";s&&!i&&r(o,m,{configurable:!0,get:function(){try{return u(l,c(this))[1]}catch(t){return""}}})},b727:function(t,e,a){var s=a("0366"),i=a("e330"),n=a("44ad"),r=a("7b0b"),o=a("07fa"),c=a("65f0"),l=i([].push),u=function(t){var e=1==t,a=2==t,i=3==t,u=4==t,m=6==t,d=7==t,p=5==t||m;return function(k,v,f,b){for(var h,_,w=r(k),g=n(w),y=s(v,f),F=o(g),x=0,S=b||c,I=e?S(k,F):a||d?S(k,0):void 0;F>x;x++)if((p||x in g)&&(h=g[x],_=y(h,x,w),t))if(e)I[x]=_;else if(_)switch(t){case 3:return!0;case 5:return h;case 6:return x;case 2:l(I,h)}else switch(t){case 4:return!1;case 7:l(I,h)}return m?-1:i||u?u:I}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},cd75:function(t,e,a){},d81d:function(t,e,a){"use strict";var s=a("23e7"),i=a("b727").map,n=a("1dde"),r=n("map");s({target:"Array",proto:!0,forced:!r},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(t,e,a){var s=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==s(t)}}}]);
//# sourceMappingURL=chunk-505da40e.a75d10c3.js.map