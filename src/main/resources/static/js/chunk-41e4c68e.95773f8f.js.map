{"version":3,"sources":["webpack:///./src/request/request.js","webpack:///./src/views/Login.vue?f7bd","webpack:///./src/views/Login.vue?05b8","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?5d79","webpack:///./src/views/Login.vue?24a5"],"names":["instance","axios","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","router","push","err","Promise","reject","response","data","code","window","removeItem","catch","e","console","log","Message","showClose","message","type","error","status","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","loginForm","rules","model","value","callback","$$v","$set","expression","on","$event","submitForm","resetForm","staticRenderFns","username","password","methods","$refs","formName","validate","valid","resetFields","component"],"mappings":"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","file":"js/chunk-41e4c68e.95773f8f.js","sourcesContent":["import axios from \"axios\";\nimport router from \"@/router\";\nimport { Message } from \"element-ui\"; //引入axios\n\nlet instance = axios.create({\n  baseURL:  \"http://localhost:8080\",\n});\n//http://localhost:8080\ninstance.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      // 判断是否存在token，如果存在的话，则每个http header都加上token\n      config.headers.token = token; //请求头加上token\n    } else {\n      router.push(\"/login\");\n    }\n    return config;\n  },\n  (err) => {\n    return Promise.reject(err);\n  }\n);\n\ninstance.interceptors.response.use(\n  (response) => {\n    //拦截响应，做统一处理\n    if (response.data.code) {\n      switch (response.data.code) {\n        case 4004:\n          window.localStorage.removeItem(\"token\");\n          window.localStorage.removeItem(\"info\");\n          router.push(\"/login\").catch((e) => {\n            console.log(e);\n          });\n          break;\n\n        case 4003:\n          Message({\n            showClose: true,\n            message: \"权限不足\",\n            type: \"warning\",\n          });\n          break;\n      }\n    }\n    return response;\n  },\n  //接口错误状态处理，也就是说无响应时的处理\n  (error) => {\n    return Promise.reject(error.response.status); // 返回接口返回的错误信息\n  }\n);\nexport default instance;\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=e64e91ee&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('div',{staticClass:\"login-box\"},[_c('h2',[_vm._v(\"云峰村信息采集程序\")]),_c('div',{staticClass:\"login-form\"},[_c('el-form',{ref:\"loginForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名:\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.loginForm.username),callback:function ($$v) {_vm.$set(_vm.loginForm, \"username\", $$v)},expression:\"loginForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码:\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"show-password\":\"\"},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('loginForm')}}},[_vm._v(\"登陆\")]),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('loginForm')}}},[_vm._v(\"重置\")])],1)],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"login\">\n    <div class=\"login-box\">\n      <h2>云峰村信息采集程序</h2>\n      <div class=\"login-form\">\n        <el-form\n          :model=\"loginForm\"\n          :rules=\"rules\"\n          ref=\"loginForm\"\n          label-width=\"80px\"\n          class=\"demo-ruleForm\"\n        >\n          <el-form-item label=\"用户名:\" prop=\"username\">\n            <el-input v-model=\"loginForm.username\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"密码:\" prop=\"password\">\n            <el-input v-model=\"loginForm.password\" show-password></el-input>\n          </el-form-item>\n          <el-form-item>\n            <el-button type=\"primary\" @click=\"submitForm('loginForm')\"\n              >登陆</el-button\n            >\n            <el-button @click=\"resetForm('loginForm')\">重置</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport instance from \"@/request/request\";\n\nexport default {\n  data() {\n    return {\n      loginForm: {\n        username: \"\",\n        password: \"\",\n      },\n      rules: {\n        username: [\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\n          {\n            min: 2,\n            max: 10,\n            message: \"长度在 2 到 10 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n        password: [\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\n          {\n            min: 6,\n            max: 20,\n            message: \"长度在 6 到 20 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  methods: {\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          instance\n            .post(\"/login\", this.$qs.stringify(this.loginForm))\n            .then((res) => {\n              const token = res.headers.token;\n              if (token && res.data.code == 200) {\n                this.$message({\n                  message: \"登陆成功\",\n                  type: \"success\",\n                });\n                window.localStorage.setItem(\"token\", token);\n                let path = localStorage.getItem(\"toPath\");\n                if (path) {\n                  this.$router.push(path);\n                } else {\n                  this.$router.push(\"/main\");\n                }\n              } else {\n                this.$message.error(res.data.message);\n              }\n            })\n            .catch((err) => {\n              console.log(err);\n            });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.login-box {\n  width: 400px;\n  height: 300px;\n  background-color: white;\n  opacity: 0.8;\n  border-radius: 8px;\n}\n.login {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n\n  background-image: url(\"../assets/image/img.png\");\n  background-size: cover;\n}\nh2 {\n  text-align: center;\n}\n.login-form {\n  display: flex;\n  align-items: center;\n  height: 70%;\n  justify-content: space-around;\n  margin-left: -20px;\n}\n.app {\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=e64e91ee&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=e64e91ee&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e64e91ee\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}