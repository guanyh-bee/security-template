(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41e4c68e"],{"284b":function(e,r,o){"use strict";o("d3b7");var t=o("bc3a"),s=o.n(t),n=o("a18c"),a=o("5c96"),i=s.a.create({baseURL:"http://localhost:8080"});i.interceptors.request.use((function(e){var r=localStorage.getItem("token");return r?e.headers.token=r:n["a"].push("/login"),e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){if(e.data.code)switch(e.data.code){case 4004:window.localStorage.removeItem("token"),window.localStorage.removeItem("info"),n["a"].push("/login").catch((function(e){console.log(e)}));break;case 4003:Object(a["Message"])({showClose:!0,message:"权限不足",type:"warning"});break}return e}),(function(e){return Promise.reject(e.response.status)})),r["a"]=i},"69cf":function(e,r,o){"use strict";o("74ba")},"74ba":function(e,r,o){},a55b:function(e,r,o){"use strict";o.r(r);var t=function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("div",{staticClass:"login"},[o("div",{staticClass:"login-box"},[o("h2",[e._v("云峰村信息采集程序")]),o("div",{staticClass:"login-form"},[o("el-form",{ref:"loginForm",staticClass:"demo-ruleForm",attrs:{model:e.loginForm,rules:e.rules,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"用户名:",prop:"username"}},[o("el-input",{model:{value:e.loginForm.username,callback:function(r){e.$set(e.loginForm,"username",r)},expression:"loginForm.username"}})],1),o("el-form-item",{attrs:{label:"密码:",prop:"password"}},[o("el-input",{attrs:{"show-password":""},model:{value:e.loginForm.password,callback:function(r){e.$set(e.loginForm,"password",r)},expression:"loginForm.password"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("loginForm")}}},[e._v("登陆")]),o("el-button",{on:{click:function(r){return e.resetForm("loginForm")}}},[e._v("重置")])],1)],1)],1)])])},s=[],n=o("284b"),a={data:function(){return{loginForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]}}},methods:{submitForm:function(e){var r=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;n["a"].post("/login",r.$qs.stringify(r.loginForm)).then((function(e){var o=e.headers.token;if(o&&200==e.data.code){r.$message({message:"登陆成功",type:"success"}),window.localStorage.setItem("token",o);var t=localStorage.getItem("toPath");t?r.$router.push(t):r.$router.push("/main")}else r.$message.error(e.data.message)})).catch((function(e){console.log(e)}))}))},resetForm:function(e){this.$refs[e].resetFields()}}},i=a,l=(o("69cf"),o("2877")),c=Object(l["a"])(i,t,s,!1,null,"e64e91ee",null);r["default"]=c.exports}}]);
//# sourceMappingURL=chunk-41e4c68e.95773f8f.js.map