(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-439962fe"],{"0b42":function(e,t,a){var o=a("da84"),r=a("e8b5"),n=a("68ee"),s=a("861d"),i=a("b622"),l=i("species"),c=o.Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,n(t)&&(t===c||r(t.prototype))?t=void 0:s(t)&&(t=t[l],null===t&&(t=void 0))),void 0===t?c:t}},"0c2c":function(e,t,a){"use strict";a("675b")},"1dde":function(e,t,a){var o=a("d039"),r=a("b622"),n=a("2d00"),s=r("species");e.exports=function(e){return n>=51||!o((function(){var t=[],a=t.constructor={};return a[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"284b":function(e,t,a){"use strict";a("d3b7");var o=a("bc3a"),r=a.n(o),n=a("a18c"),s=a("5c96"),i=r.a.create({baseURL:"http://e7s6ux.natappfree.cc"});i.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t?e.headers.token=t:n["a"].push("/login"),e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){if(e.data.code)switch(e.data.code){case 4004:window.localStorage.removeItem("token"),window.localStorage.removeItem("info"),n["a"].push("/login").catch((function(e){console.log(e)}));break;case 4003:Object(s["Message"])({showClose:!0,message:"权限不足",type:"warning"});break}return e}),(function(e){return Promise.reject(e.response.status)})),t["a"]=i},"65f0":function(e,t,a){var o=a("0b42");e.exports=function(e,t){return new(o(e))(0===t?0:t)}},"675b":function(e,t,a){},b727:function(e,t,a){var o=a("0366"),r=a("e330"),n=a("44ad"),s=a("7b0b"),i=a("07fa"),l=a("65f0"),c=r([].push),u=function(e){var t=1==e,a=2==e,r=3==e,u=4==e,d=6==e,f=7==e,g=5==e||d;return function(p,h,m,b){for(var v,w,y=s(p),k=n(y),R=o(h,m),_=i(k),x=0,I=b||l,F=t?I(p,_):a||f?I(p,0):void 0;_>x;x++)if((g||x in k)&&(v=k[x],w=R(v,x,y),e))if(t)F[x]=w;else if(w)switch(e){case 3:return!0;case 5:return v;case 6:return x;case 2:c(F,v)}else switch(e){case 4:return!1;case 7:c(F,v)}return d?-1:r||u?u:F}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},be9c:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role-box"},[a("div",{staticClass:"role-content"},[a("div",{staticClass:"by-user"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.userData}},[a("el-table-column",{attrs:{prop:"account",label:"账号",width:"200",align:"center"}}),a("el-table-column",{attrs:{prop:"realName",label:"姓名",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"deptName",label:"组织",align:"center",width:"350"}}),a("el-table-column",{attrs:{label:"角色",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.roles,(function(t,o){return a("el-tag",{key:o,staticStyle:{"margin-right":"3px"},attrs:{type:e.roleType(t.name)}},[e._v(e._s(t.name)+" ")])}))}}])}),a("el-table-column",{attrs:{align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.enableAccount(t.row.userId,t.row.enabled)}},model:{value:t.row.enabled,callback:function(a){e.$set(t.row,"enabled",a)},expression:"scope.row.enabled"}})]}}])},[a("template",{slot:"header"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"红色代表已冻结,账号无法登陆,绿色代表正常,操作即时生效",placement:"top-start"}},[a("span",[e._v("冻结该账号"),a("i",{staticClass:"el-icon-info"})])])],1)],2),a("el-table-column",{attrs:{label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary",round:""},on:{click:function(a){return e.editRole(t.row)}}},[e._v("编辑角色")])]}}])})],1),a("el-dialog",{attrs:{title:"编辑 "+e.currentUser.realName+" 的角色",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-descriptions",{attrs:{title:"用户信息"}},[a("el-descriptions-item",{attrs:{label:"账号"}},[e._v(e._s(e.currentUser.account))]),a("el-descriptions-item",{attrs:{label:"姓名"}},[e._v(e._s(e.currentUser.realName))]),a("el-descriptions-item",{attrs:{label:"组织"}},[e._v(e._s(e.currentUser.deptName))])],1),a("h3",[e._v("选择角色")]),a("el-form",{attrs:{model:e.editRoleForm}},[a("el-form-item",{attrs:{label:"角色列表:"}},[a("el-checkbox-group",{attrs:{min:1},model:{value:e.editRoleForm.roleId,callback:function(t){e.$set(e.editRoleForm,"roleId",t)},expression:"editRoleForm.roleId"}},e._l(e.roles,(function(t){return a("el-checkbox",{key:t.id,attrs:{min:1,label:t.id,border:""},model:{value:e.editRoleForm.roleId,callback:function(t){e.$set(e.editRoleForm,"roleId",t)},expression:"editRoleForm.roleId"}},[e._v(e._s(t.name))])})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleChangeRole}},[e._v("确 定")])],1)],1)],1)]),a("div",{staticClass:"role-page"},[a("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-sizes":[10,20,30,50,100],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},r=[],n=(a("d81d"),a("284b")),s={data:function(){return{activeIndex:"1",userData:[],roleData:[],currentUser:{},dialogFormVisible:!1,editRoleForm:{userId:0,roleId:[]},roles:[],page:{currentPage:1,pageSize:10,total:0},loading:!1}},methods:{handleSizeChange:function(e){this.page.pageSize=e,this.getRoleByUser()},handleCurrentChange:function(e){this.page.currentPage=e,this.getRoleByUser()},handleSelect:function(e){this.activeIndex=e+""},getRoleByUser:function(){var e=this;this.loading=!0,n["a"].get("/role/byUser/"+this.page.currentPage+"/"+this.page.pageSize).then((function(t){200==t.data.code?(e.userData=t.data.data.records,e.page.total=t.data.data.total):e.$message.error(t.data.message),e.loading=!1})).catch((function(t){console.log(t),e.loading=!1}))},roleType:function(e){var t="";switch(e){case"超级管理员":t="danger";break;case"乡镇管理员":t="warning";break;case"村干部":t="info";break;case"社长":t="success";break}return t},showInput:function(e){console.log(e),this.selectVisible=!this.selectVisible},editRole:function(e){this.currentUser=e,this.editRoleForm.userId=e.userId,this.editRoleForm.roleId=e.roles.map((function(e){return e.id})),this.dialogFormVisible=!0},getRoles:function(){var e=this;n["a"].get("/role/roles").then((function(t){e.roles=t.data.data})).catch((function(e){console.log(e)}))},handleChangeRole:function(){var e=this;n["a"].post("/role/updateRole",this.editRoleForm).then((function(t){200==t.data.code?(e.dialogFormVisible=!1,e.getRoleByUser()):e.$message(t.data.message)})).catch((function(e){console.log(e)}))},handleEdit:function(e){console.log(e)},enableAccount:function(e,t){var a=this;n["a"].post("/role/enable/"+e+"/"+t).then((function(e){200==e.data.code?t?a.$message.success("启用成功"):a.$message.success("冻结成功"):a.$message.error(e.data.message)})).catch((function(e){console.log(e)}))}},created:function(){this.getRoleByUser(),this.getRoles()}},i=s,l=(a("0c2c"),a("2877")),c=Object(l["a"])(i,o,r,!1,null,"1217d220",null);t["default"]=c.exports},d81d:function(e,t,a){"use strict";var o=a("23e7"),r=a("b727").map,n=a("1dde"),s=n("map");o({target:"Array",proto:!0,forced:!s},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(e,t,a){var o=a("c6b6");e.exports=Array.isArray||function(e){return"Array"==o(e)}}}]);
//# sourceMappingURL=chunk-439962fe.2dbf0b60.js.map