(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d460fa70"],{"1e0d":function(e,t,a){"use strict";a("c902")},"284b":function(e,t,a){"use strict";a("d3b7");var l=a("bc3a"),n=a.n(l),o=a("a18c"),r=a("5c96"),i=n.a.create({baseURL:"http://e7s6ux.natappfree.cc"});i.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t?e.headers.token=t:o["a"].push("/login"),e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){if(e.data.code)switch(e.data.code){case 4004:window.localStorage.removeItem("token"),window.localStorage.removeItem("info"),o["a"].push("/login").catch((function(e){console.log(e)}));break;case 4003:Object(r["Message"])({showClose:!0,message:"权限不足",type:"warning"});break}return e}),(function(e){return Promise.reject(e.response.status)})),t["a"]=i},4035:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"published"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.publishedData,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"taskName",label:"任务名称"}}),a("el-table-column",{attrs:{prop:"created",label:"任务创建时间"}}),a("el-table-column",{attrs:{prop:"untilTime",label:"任务截至时间"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.taskStatus?a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("查看任务进度 ")]):a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("查看任务结果 ")])]}}])})],1),a("el-drawer",{attrs:{title:e.title,visible:e.table,direction:"rtl",size:"90%"},on:{"update:visible":function(t){e.table=t},closed:function(t){e.drawerData=!1}}},[a("div",{staticStyle:{"margin-bottom":"10px",display:"flex","justify-content":"right","margin-right":"10px"}},[a("el-button",{on:{click:e.showItem}},[e._v("展示项")]),a("el-button",[e._v("导出表格")])],1),e.drawerData?a("div",[a("el-table",{attrs:{data:e.gridData}},[-1!=e.needItem.indexOf("realName")?a("el-table-column",{attrs:{prop:"info.realName",label:"姓名"}}):e._e(),-1!=e.needItem.indexOf("account")?a("el-table-column",{attrs:{prop:"info.account",label:"账号"}}):e._e(),-1!=e.needItem.indexOf("addr")?a("el-table-column",{attrs:{prop:"info.addr",label:"住址"}}):e._e(),-1!=e.needItem.indexOf("deptName")?a("el-table-column",{attrs:{prop:"info.deptName",label:"组织名称"}}):e._e(),-1!=e.needItem.indexOf("gender")?a("el-table-column",{attrs:{label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1==t.row.info.gender?"男":"女"))])]}}],null,!1,1866781065)}):e._e(),-1!=e.needItem.indexOf("host")?a("el-table-column",{attrs:{label:"是否户主"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.info.host?"是":"否"))])]}}],null,!1,3042631082)}):e._e(),-1!=e.needItem.indexOf("relation")?a("el-table-column",{attrs:{prop:"info.relation",label:"与户主关系"}}):e._e(),e._l(e.gridData[0].resultData,(function(t,l){return a("el-table-column",{key:l,attrs:{label:t.taskItem.taskItemName}},[a("el-table-column",{attrs:{label:"是否有"+t.taskItem.taskItemName},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.resultData[l].hasItem?"是":"否")+" ")]}}],null,!0)}),a("el-table-column",{attrs:{label:t.taskItem.taskItemName+"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.resultData[l].itemNum)+" ")]}}],null,!0)})],1)})),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{round:"",size:"mini",type:"primary"},on:{click:function(a){return e.handleEditDetail(t.$index,t.row)}}},[e._v("编辑 ")])]}}],null,!1,2150795446)})],2)],1):e._e()]),a("el-dialog",{attrs:{title:"选择展示项",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[e._l(e.allItem,(function(t){return a("el-checkbox",{key:t.prop,staticStyle:{"margin-bottom":"10px"},attrs:{border:"",disabled:t.disabled,label:t.prop},model:{value:e.needItem,callback:function(t){e.needItem=t},expression:"needItem"}},[e._v(e._s(t.label)+" ")])})),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("确 定")])],1)],2)],1)},n=[],o=(a("e9c4"),a("284b")),r={data:function(){return{publishedData:[],drawerData:!1,dialogFormVisible:!1,table:!1,gridData:[],title:"",allItem:[{label:"姓名",prop:"realName",disabled:!0},{label:"账号",prop:"account",disabled:!1},{label:"住址",prop:"addr",disabled:!1},{label:"组织名称",prop:"deptName",disabled:!1},{label:"性别",prop:"gender",disabled:!1},{label:"是否户主",prop:"host",disabled:!1},{label:"与户主关系",prop:"relation",disabled:!1}],needItem:["realName"]}},methods:{tableRowClassName:function(e){var t=e.row;return 0===t.taskStatus?"warning-row":1===t.taskStatus?"success-row":""},getPublished:function(){var e=this;o["a"].get("/task/published").then((function(t){200==t.data.code&&(e.publishedData=t.data.data)})).catch((function(e){console.log(e)}))},handleEdit:function(e){var t=this;this.title=e.taskName,this.table=!0,this.needItem=JSON.parse(window.localStorage.getItem("showItem"))?JSON.parse(window.localStorage.getItem("showItem")):["realName"],o["a"].get("/task/getResults/"+e.taskId).then((function(e){200==e.data.code?(t.gridData=e.data.data,t.drawerData=!0):t.$message.error(e.data.message)})).catch((function(e){console.log(e)}))},handleEditDetail:function(e,t){console.log(e,t)},showItem:function(){this.dialogFormVisible=!0}},created:function(){this.getPublished()},watch:{needItem:function(e){window.localStorage.setItem("showItem",JSON.stringify(e))}}},i=r,s=(a("1e0d"),a("2877")),u=Object(s["a"])(i,l,n,!1,null,"9099d362",null);t["default"]=u.exports},c902:function(e,t,a){},e9c4:function(e,t,a){var l=a("23e7"),n=a("da84"),o=a("d066"),r=a("2ba4"),i=a("e330"),s=a("d039"),u=n.Array,d=o("JSON","stringify"),c=i(/./.exec),b=i("".charAt),m=i("".charCodeAt),f=i("".replace),p=i(1..toString),g=/[\uD800-\uDFFF]/g,h=/^[\uD800-\uDBFF]$/,w=/^[\uDC00-\uDFFF]$/,k=function(e,t,a){var l=b(a,t-1),n=b(a,t+1);return c(h,e)&&!c(w,n)||c(w,e)&&!c(h,l)?"\\u"+p(m(e,0),16):e},_=s((function(){return'"\\udf06\\ud834"'!==d("\udf06\ud834")||'"\\udead"'!==d("\udead")}));d&&l({target:"JSON",stat:!0,forced:_},{stringify:function(e,t,a){for(var l=0,n=arguments.length,o=u(n);l<n;l++)o[l]=arguments[l];var i=r(d,null,o);return"string"==typeof i?f(i,g,k):i}})}}]);
//# sourceMappingURL=chunk-d460fa70.3e4f9bbd.js.map