(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fa8ed42e"],{"013d":function(t,e,a){"use strict";a("eaa5")},"0b42":function(t,e,a){var n=a("da84"),o=a("e8b5"),i=a("68ee"),r=a("861d"),s=a("b622"),l=s("species"),c=n.Array;t.exports=function(t){var e;return o(t)&&(e=t.constructor,i(e)&&(e===c||o(e.prototype))?e=void 0:r(e)&&(e=e[l],null===e&&(e=void 0))),void 0===e?c:e}},"1dde":function(t,e,a){var n=a("d039"),o=a("b622"),i=a("2d00"),r=o("species");t.exports=function(t){return i>=51||!n((function(){var e=[],a=e.constructor={};return a[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"284b":function(t,e,a){"use strict";a("d3b7");var n=a("bc3a"),o=a.n(n),i=a("a18c"),r=a("5c96"),s=o.a.create({baseURL:"http://e7s6ux.natappfree.cc"});s.interceptors.request.use((function(t){var e=localStorage.getItem("token");return e?t.headers.token=e:i["a"].push("/login"),t}),(function(t){return Promise.reject(t)})),s.interceptors.response.use((function(t){if(t.data.code)switch(t.data.code){case 4004:window.localStorage.removeItem("token"),window.localStorage.removeItem("info"),i["a"].push("/login").catch((function(t){console.log(t)}));break;case 4003:Object(r["Message"])({showClose:!0,message:"权限不足",type:"warning"});break}return t}),(function(t){return Promise.reject(t.response.status)})),e["a"]=s},"65f0":function(t,e,a){var n=a("0b42");t.exports=function(t,e){return new(n(t))(0===e?0:e)}},b0c0:function(t,e,a){var n=a("83ab"),o=a("5e77").EXISTS,i=a("e330"),r=a("9bf2").f,s=Function.prototype,l=i(s.toString),c=/^\s*function ([^ (]*)/,u=i(c.exec),h="name";n&&!o&&r(s,h,{configurable:!0,get:function(){try{return u(c,l(this))[1]}catch(t){return""}}})},b727:function(t,e,a){var n=a("0366"),o=a("e330"),i=a("44ad"),r=a("7b0b"),s=a("07fa"),l=a("65f0"),c=o([].push),u=function(t){var e=1==t,a=2==t,o=3==t,u=4==t,h=6==t,d=7==t,f=5==t||h;return function(g,m,b,p){for(var y,v,A=r(g),w=i(A),k=n(m,b),x=s(w),_=0,I=p||l,C=e?I(g,x):a||d?I(g,0):void 0;x>_;_++)if((f||_ in w)&&(y=w[_],v=k(y,_,A),t))if(e)C[_]=v;else if(v)switch(t){case 3:return!0;case 5:return y;case 6:return _;case 2:c(C,y)}else switch(t){case 4:return!1;case 7:c(C,y)}return h?-1:o||u?u:C}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},d81d:function(t,e,a){"use strict";var n=a("23e7"),o=a("b727").map,i=a("1dde"),r=i("map");n({target:"Array",proto:!0,forced:!r},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(t,e,a){var n=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}},eaa5:function(t,e,a){},f096:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"authority-box"},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:"1"}},[t._v("权限列表")]),a("el-menu-item",{attrs:{index:"2"}},[t._v("角色权限")])],1),a("div",{staticClass:"a"},[1==t.activeIndex?a("div",{staticClass:"b"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"max-height":"650",data:t.authority}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{label:"权限名称",align:"center",prop:"authorityName"}}),a("el-table-column",{attrs:{align:"center",label:"是否启用该权限"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return t.switchEnable(e.row)}},model:{value:e.row.enable,callback:function(a){t.$set(e.row,"enable",a)},expression:"scope.row.enable"}})]}}],null,!1,3412839045)})],1)],1):t._e(),2==t.activeIndex?a("div",{staticClass:"b"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.authorityData}},[a("el-table-column",{attrs:{label:"角色",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.role.name)+" ")]}}],null,!1,2356685984)}),a("el-table-column",{attrs:{label:"拥有的权限",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.authorities.length>0?a("span",["超级管理员"==e.row.role.name?a("span",[a("el-tag",{attrs:{type:"danger"}},[t._v("所有权限")])],1):a("span",t._l(e.row.authorities,(function(e){return a("el-tag",{key:e.id,staticStyle:{"margin-right":"5px","margin-bottom":"5px"},attrs:{type:"success"}},[t._v(t._s(e.authorityName))])})),1)]):a("span",[a("el-tag",{attrs:{type:"warning"}},[t._v("暂无权限")])],1)]}}],null,!1,3171901397)}),a("el-table-column",{attrs:{label:"操作",align:"right",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",disabled:"超级管理员"==e.row.role.name,round:"",type:"primary"},on:{click:function(a){return t.handleEditAuthority(e.row)}}},[t._v(t._s("超级管理员"==e.row.role.name?"管理员拥有所有权限":"编辑该角色权限"))])]}}],null,!1,3966259253)})],1)],1):t._e(),1==t.activeIndex?a("div",{staticClass:"c"},[a("div",[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,50,100,200],"page-size":t.size,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]):t._e(),a("el-dialog",{attrs:{title:"编辑"+t.title+"的权限",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),a("el-form",{attrs:{model:t.authorityForm}},[a("el-form-item",[a("el-checkbox-group",{on:{change:t.handleCheckedChange},model:{value:t.authorityForm.authorityIds,callback:function(e){t.$set(t.authorityForm,"authorityIds",e)},expression:"authorityForm.authorityIds"}},t._l(t.allAuthority,(function(e){return a("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.authorityName))])})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitEditAuthority}},[t._v("确 定")])],1)],1)],1)],1)},o=[],i=(a("b0c0"),a("d81d"),a("284b")),r={data:function(){return{activeIndex:"1",currentPage:1,total:0,size:10,authority:[],authorityData:[],dialogFormVisible:!1,authorityForm:{roleId:0,authorityIds:[]},title:"",checkAll:!1,isIndeterminate:!0,allAuthority:[]}},methods:{handleSelect:function(t){this.activeIndex=t},getAuthorities:function(){var t=this;i["a"].get("/role/authorities/"+this.currentPage+"/"+this.size).catch((function(t){console.log(t)})).then((function(e){200==e.data.code?(t.total=e.data.data.total,t.authority=e.data.data.records):t.$message.error(e.data.message)}))},getAllAuthority:function(){var t=this;i["a"].get("/role/allAuthorities").then((function(e){200==e.data.code?t.allAuthority=e.data.data:t.$message.error(e.data.message)})).catch((function(t){console.log(t)}))},handleSizeChange:function(t){this.size=t,this.getAuthorities()},handleCurrentChange:function(t){this.currentPage=t,this.getAuthorities()},switchEnable:function(t){var e=this;i["a"].post("/role/updateAuthority/"+t.id+"/"+t.enable).then((function(a){200==a.data.code&&(t.enable?e.$message.success("开启成功"):e.$message.success("关闭成功"))})).catch((function(t){console.log(t)}))},handleEditAuthority:function(t){this.title=t.role.name,this.dialogFormVisible=!0,this.authorityForm.roleId=t.role.id,this.authorityForm.authorityIds=t.authorities.map((function(t){return t.id}))},handleCheckAllChange:function(t){this.authorityForm.authorityIds=t?this.allAuthority.map((function(t){return t.id})):[],this.isIndeterminate=!1},handleCheckedChange:function(t){var e=t.length;this.checkAll=e===this.allAuthority.length,this.isIndeterminate=e>0&&e<this.allAuthority.length},submitEditAuthority:function(){var t=this;i["a"].post("/role/updateRoleAuthority",this.authorityForm).then((function(e){200==e.data.code?(t.$message.success("修改成功"),t.getRoleAuthority(),t.dialogFormVisible=!1):t.$message.error(e.data.message)})).catch((function(t){console.log(t)}))},getRoleAuthority:function(){var t=this;i["a"].get("/role/getAuthority").then((function(e){var a=e.data;200==a.code&&(t.authorityData=a.data)})).catch()}},created:function(){this.getAuthorities(),this.getRoleAuthority(),this.getAllAuthority()}},s=r,l=(a("013d"),a("2877")),c=Object(l["a"])(s,n,o,!1,null,"2e55d00a",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-fa8ed42e.5ddb6d62.js.map