{"version":3,"sources":["webpack:///./src/request/request.js","webpack:///./src/components/main/user/User.vue?d346","webpack:///./src/components/main/user/User.vue?4e77","webpack:///src/components/main/user/User.vue","webpack:///./src/components/main/user/User.vue?ee37","webpack:///./src/components/main/user/User.vue?7626"],"names":["instance","axios","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","router","push","err","Promise","reject","response","data","code","window","removeItem","catch","e","console","log","Message","showClose","message","type","error","status","render","_vm","this","_h","$createElement","_c","_self","allLoading","_e","directives","name","rawName","value","expression","staticClass","attrs","deptData","defaultProps","allowDrop","allowDrag","on","handleNodeClick","handleDrop","scopedSlots","_u","key","fn","ref","node","_v","_s","label","canEdit","slot","nativeOn","$event","append","remove","updateName","setPrincipal","dialogFormVisible","deptForm","deptRule","model","callback","$$v","$set","submitAddDept","dialogUpdateVisible","updateDeptForm","submitUpdateDept","dialogSetPrincipalVisible","setPrincipalForm","staticStyle","remoteMethod","loading","change","_l","item","userId","disabled","realName","account","info","baseInfoId","closeTag","myUserId","selectNames","length","submitPrincipalDept","addUserPanel","tableData","filter","search","toLowerCase","includes","scope","row","gender","relation","handleEdit","$index","handleDelete","addUserForm","rules","expandTrigger","checkStrictly","isHost","submitForm","resetForm","staticRenderFns","children","ids","username","phone","addr","dept","deptName","deptParentId","deptId","userIds","options","selectedNames","watch","handler","newName","oldName","deep","immediate","methods","id","getUserByDeptId","$refs","formName","validate","valid","resetFields","res","getTree","dropType","draggingNode","deptLevel","dropNode","getPrincipal","created","component"],"mappings":"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","file":"js/chunk-2af88ac0.e4e39c68.js","sourcesContent":["import axios from \"axios\";\nimport router from \"@/router\";\nimport { Message } from \"element-ui\"; //引入axios\n\nlet instance = axios.create({\n  baseURL:  \"http://e7s6ux.natappfree.cc\",\n});\n//http://localhost:8080\ninstance.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      // 判断是否存在token，如果存在的话，则每个http header都加上token\n      config.headers.token = token; //请求头加上token\n    } else {\n      router.push(\"/login\");\n    }\n    return config;\n  },\n  (err) => {\n    return Promise.reject(err);\n  }\n);\n\ninstance.interceptors.response.use(\n  (response) => {\n    //拦截响应，做统一处理\n    if (response.data.code) {\n      switch (response.data.code) {\n        case 4004:\n          window.localStorage.removeItem(\"token\");\n          window.localStorage.removeItem(\"info\");\n          router.push(\"/login\").catch((e) => {\n            console.log(e);\n          });\n          break;\n\n        case 4003:\n          Message({\n            showClose: true,\n            message: \"权限不足\",\n            type: \"warning\",\n          });\n          break;\n      }\n    }\n    return response;\n  },\n  //接口错误状态处理，也就是说无响应时的处理\n  (error) => {\n    return Promise.reject(error.response.status); // 返回接口返回的错误信息\n  }\n);\nexport default instance;\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&id=acfe70fa&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.allLoading)?_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.allLoading),expression:\"allLoading\"}],staticClass:\"user-main\"},[_c('div',{staticClass:\"user-main-left\"},[_c('div',{staticClass:\"user-main-left-content\"},[_c('el-tree',{attrs:{\"data\":_vm.deptData,\"node-key\":\"id\",\"props\":_vm.defaultProps,\"expand-on-click-node\":false,\"default-expand-all\":\"\",\"draggable\":\"\",\"allow-drop\":_vm.allowDrop,\"allow-drag\":_vm.allowDrag},on:{\"node-click\":_vm.handleNodeClick,\"node-drop\":_vm.handleDrop},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar node = ref.node;\nvar data = ref.data;\nreturn _c('span',{staticClass:\"custom-tree-node\"},[_c('span',[_vm._v(_vm._s(node.label))]),_c('span',[(data.canEdit == 1)?_c('el-dropdown',[_c('span',{staticClass:\"el-dropdown-link\"},[_c('i',{staticClass:\"el-icon-more el-icon--right\"})]),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{nativeOn:{\"click\":function($event){return _vm.append(node)}}},[_c('span',[_vm._v(\"新增\")])]),_c('el-dropdown-item',{nativeOn:{\"click\":function($event){return _vm.remove(node)}}},[_c('span',[_vm._v(\"删除\")])]),_c('el-dropdown-item',{nativeOn:{\"click\":function($event){return _vm.updateName(data)}}},[_c('span',[_vm._v(\"修改\")])]),_c('el-dropdown-item',{nativeOn:{\"click\":function($event){return _vm.setPrincipal(data)}}},[_c('span',[_vm._v(\"设置负责人\")])])],1)],1):_vm._e()],1)])}}],null,false,2280138974)}),_c('el-dialog',{attrs:{\"width\":\"30%\",\"title\":\"新增部门\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"deptForm\",attrs:{\"model\":_vm.deptForm,\"rules\":_vm.deptRule}},[_c('el-form-item',{attrs:{\"label\":\"部门名称\",\"prop\":\"deptName\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.deptForm.deptName),callback:function ($$v) {_vm.$set(_vm.deptForm, \"deptName\", $$v)},expression:\"deptForm.deptName\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitAddDept('deptForm')}}},[_vm._v(\"立即创建 \")]),_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")])],1)],1),_c('el-dialog',{attrs:{\"width\":\"30%\",\"title\":\"修改部门\",\"visible\":_vm.dialogUpdateVisible},on:{\"update:visible\":function($event){_vm.dialogUpdateVisible=$event}}},[_c('el-form',{ref:\"updateDeptForm\",attrs:{\"model\":_vm.updateDeptForm,\"rules\":_vm.deptRule}},[_c('el-form-item',{attrs:{\"label\":\"部门名称\",\"prop\":\"deptName\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.updateDeptForm.deptName),callback:function ($$v) {_vm.$set(_vm.updateDeptForm, \"deptName\", $$v)},expression:\"updateDeptForm.deptName\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitUpdateDept('updateDeptForm')}}},[_vm._v(\"立即修改 \")]),_c('el-button',{on:{\"click\":function($event){_vm.dialogUpdateVisible = false}}},[_vm._v(\"取 消\")])],1)],1),_c('el-dialog',{attrs:{\"width\":\"50%\",\"title\":\"设置部门负责人\",\"visible\":_vm.dialogSetPrincipalVisible},on:{\"update:visible\":function($event){_vm.dialogSetPrincipalVisible=$event}}},[_c('div',{staticClass:\"set-principal-dialog\"},[_c('div',{staticClass:\"set-principal-dialog-left\"},[_c('el-form',{attrs:{\"model\":_vm.setPrincipalForm}},[_c('el-form-item',{attrs:{\"prop\":\"deptName\"}},[_c('el-select',{staticStyle:{\"width\":\"90%\"},attrs:{\"multiple\":\"\",\"filterable\":\"\",\"remote\":\"\",\"reserve-keyword\":\"\",\"collapse-tags\":\"\",\"placeholder\":\"请输入姓名或账号以搜索...\",\"remote-method\":_vm.remoteMethod,\"loading\":_vm.loading},on:{\"change\":_vm.change},model:{value:(_vm.setPrincipalForm.userIds),callback:function ($$v) {_vm.$set(_vm.setPrincipalForm, \"userIds\", $$v)},expression:\"setPrincipalForm.userIds\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.userId,attrs:{\"disabled\":item.disabled,\"label\":item.realName+'-'+item.account,\"value\":item.userId}})}),1)],1)],1)],1),_c('div',{staticClass:\"set-principal-dialog-right\"},[_c('div',{staticClass:\"set-principal-dialog-right-top\"},[_c('h3',[_vm._v(\"已选择人员:\")]),_vm._l((_vm.selectNames),function(name){return _c('el-tag',{key:name,attrs:{\"type\":\"info\"}},[_vm._v(_vm._s(name))])})],2),_c('div',{staticClass:\"set-principal-dialog-right-bottom\"},[_c('h3',[_vm._v(\"已有人员:\")]),_vm._l((_vm.selectedNames),function(info){return _c('el-tag',{key:info.baseInfoId,attrs:{\"closable\":\"\",\"type\":\"success\"},on:{\"close\":function($event){return _vm.closeTag(info.myUserId)}}},[_vm._v(_vm._s(info.realName)+\" \")])})],2)])]),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.selectNames.length<1},on:{\"click\":_vm.submitPrincipalDept}},[_vm._v(\"确定 \")]),_c('el-button',{on:{\"click\":function($event){_vm.dialogSetPrincipalVisible = false}}},[_vm._v(\"取 消\")])],1)])],1)]),_c('div',{staticClass:\"user-main-right\"},[(_vm.deptData[0].canEdit == 1)?_c('div',{staticClass:\"user-tool\"},[_c('div',[_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":function($event){_vm.addUserPanel = !_vm.addUserPanel}}},[_vm._v(\"添加用户\"),_c('i',{staticClass:\"el-icon-circle-plus el-icon--right\"})]),_c('el-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\"批量导入\"),_c('i',{staticClass:\"el-icon-upload el-icon--right\"})])],1)]):_vm._e(),_c('div',{staticClass:\"user-content\"},[(_vm.addUserPanel)?_c('div',[_c('el-table',{staticStyle:{\"width\":\"95%\",\"margin\":\"0 auto\"},attrs:{\"max-height\":\"750px\",\"data\":_vm.tableData.filter(\n              function (data) { return !_vm.search ||\n                data.realName.toLowerCase().includes(_vm.search.toLowerCase()); }\n            )}},[_c('el-table-column',{attrs:{\"label\":\"账号\",\"prop\":\"account\"}}),_c('el-table-column',{attrs:{\"label\":\"姓名\",\"prop\":\"realName\"}}),_c('el-table-column',{attrs:{\"label\":\"性别\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(scope.row.gender == 0 ? \"女\" : \"男\")+\" \")]}}],null,false,2444679955)}),_c('el-table-column',{attrs:{\"label\":\"与户主关系\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\" \"+_vm._s(scope.row.relation)+\" \"),(scope.row.host)?_c('i',{staticClass:\"el-icon-s-custom\",staticStyle:{\"color\":\"wheat\"}}):_vm._e()]}}],null,false,1823998530)}),_c('el-table-column',{attrs:{\"label\":\"手机\",\"prop\":\"phone\"}}),_c('el-table-column',{attrs:{\"label\":\"地址\",\"prop\":\"addr\"}}),_c('el-table-column',{attrs:{\"label\":\"组织\",\"prop\":\"deptName\"}}),_c('el-table-column',{attrs:{\"align\":\"right\"},scopedSlots:_vm._u([{key:\"header\",fn:function(scope){return [_c('el-input',{attrs:{\"size\":\"mini\",\"placeholder\":\"输入姓名搜索\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})]}},{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"round\":\"\"},on:{\"click\":function($event){return _vm.handleEdit(scope.$index, scope.row)}}},[_vm._v(\"编辑 \")]),(_vm.deptData[0].canEdit == 1)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\",\"round\":\"\"},on:{\"click\":function($event){return _vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"删除 \")]):_vm._e()]}}],null,false,901229621)},[_vm._v(\" eslint-disable \")])],1)],1):_c('div',{staticClass:\"add-user\"},[_c('el-form',{ref:\"addUserForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.addUserForm,\"rules\":_vm.rules,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"账号\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.addUserForm.username),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"username\", $$v)},expression:\"addUserForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"真实姓名\",\"prop\":\"realName\"}},[_c('el-input',{model:{value:(_vm.addUserForm.realName),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"realName\", $$v)},expression:\"addUserForm.realName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"组织架构\",\"prop\":\"dept\"}},[_c('el-cascader',{attrs:{\"options\":_vm.deptData,\"props\":{ expandTrigger: 'hover',\n                 checkStrictly: true,\n                 value:'id',\n\n                 }},model:{value:(_vm.addUserForm.dept),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"dept\", $$v)},expression:\"addUserForm.dept\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"phone\"}},[_c('el-input',{model:{value:(_vm.addUserForm.phone),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"phone\", $$v)},expression:\"addUserForm.phone\"}})],1),_c('el-form-item',{attrs:{\"label\":\"性别\",\"prop\":\"gender\"}},[_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\",\"active-text\":\"男\",\"inactive-text\":\"女\"},model:{value:(_vm.addUserForm.gender),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"gender\", $$v)},expression:\"addUserForm.gender\"}})],1),_c('el-form-item',{attrs:{\"label\":\"住址\",\"prop\":\"addr\"}},[_c('el-input',{model:{value:(_vm.addUserForm.addr),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"addr\", $$v)},expression:\"addUserForm.addr\"}})],1),_c('el-form-item',{attrs:{\"label\":\"是否户主\",\"prop\":\"isHost\"}},[_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\",\"active-text\":\"是\",\"inactive-text\":\"否\"},model:{value:(_vm.addUserForm.isHost),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"isHost\", $$v)},expression:\"addUserForm.isHost\"}})],1),_c('el-form-item',{attrs:{\"label\":\"与户主关系\",\"prop\":\"relation\"}},[_c('el-input',{attrs:{\"disabled\":_vm.addUserForm.isHost},model:{value:(_vm.addUserForm.relation),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"relation\", $$v)},expression:\"addUserForm.relation\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('addUserForm')}}},[_vm._v(\"立即创建\")]),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('addUserForm')}}},[_vm._v(\"重置\")])],1)],1)],1)])])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"user-main\" v-loading=\"allLoading\" v-if=\"!allLoading\">\n    <div class=\"user-main-left\">\n      <div class=\"user-main-left-content\">\n        <el-tree\n            :data=\"deptData\"\n            node-key=\"id\"\n            :props=\"defaultProps\"\n            @node-click=\"handleNodeClick\"\n            :expand-on-click-node=\"false\"\n            default-expand-all\n            @node-drop=\"handleDrop\"\n            draggable\n            :allow-drop=\"allowDrop\"\n            :allow-drag=\"allowDrag\"\n        >\n          <span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\n            <span>{{ node.label }}</span>\n            <span>\n              <el-dropdown v-if=\"data.canEdit == 1\">\n                <span class=\"el-dropdown-link\">\n                  <i class=\"el-icon-more el-icon--right\"></i>\n                </span>\n                <el-dropdown-menu slot=\"dropdown\">\n\n                  <el-dropdown-item @click.native=append(node)>\n                    <span>新增</span>\n                  </el-dropdown-item>\n\n                  <el-dropdown-item @click.native=remove(node)>\n                     <span>删除</span>\n                  </el-dropdown-item>\n\n                  <el-dropdown-item @click.native=updateName(data)>\n                     <span>修改</span>\n                  </el-dropdown-item>\n\n                  <el-dropdown-item @click.native=setPrincipal(data)>\n                     <span>设置负责人</span>\n                  </el-dropdown-item>\n\n                </el-dropdown-menu>\n              </el-dropdown>\n\n            </span>\n          </span>\n        </el-tree>\n        <!--添加部门对话框-->\n        <el-dialog\n            width=\"30%\"\n            title=\"新增部门\"\n            :visible.sync=\"dialogFormVisible\"\n        >\n          <el-form :model=\"deptForm\" ref=\"deptForm\" :rules=\"deptRule\">\n            <el-form-item label=\"部门名称\" prop=\"deptName\">\n              <el-input\n                  v-model=\"deptForm.deptName\"\n                  autocomplete=\"off\"\n              ></el-input>\n            </el-form-item>\n          </el-form>\n          <div slot=\"footer\" class=\"dialog-footer\">\n            <el-button type=\"primary\" @click=\"submitAddDept('deptForm')\"\n            >立即创建\n            </el-button\n            >\n            <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n          </div>\n        </el-dialog>\n\n        <!--修改部门对话框-->\n        <el-dialog\n            width=\"30%\"\n            title=\"修改部门\"\n            :visible.sync=\"dialogUpdateVisible\"\n        >\n          <el-form :model=\"updateDeptForm\" ref=\"updateDeptForm\" :rules=\"deptRule\">\n            <el-form-item label=\"部门名称\" prop=\"deptName\">\n              <el-input\n                  v-model=\"updateDeptForm.deptName\"\n                  autocomplete=\"off\"\n              ></el-input>\n            </el-form-item>\n          </el-form>\n          <div slot=\"footer\" class=\"dialog-footer\">\n            <el-button type=\"primary\" @click=\"submitUpdateDept('updateDeptForm')\"\n            >立即修改\n            </el-button\n            >\n            <el-button @click=\"dialogUpdateVisible = false\">取 消</el-button>\n          </div>\n        </el-dialog>\n\n        <!-- 设置部门负责人对话框-->\n        <el-dialog\n            width=\"50%\"\n            title=\"设置部门负责人\"\n            :visible.sync=\"dialogSetPrincipalVisible\"\n        >\n\n\n          <div class=\"set-principal-dialog\">\n            <div class=\"set-principal-dialog-left\">\n              <el-form :model=\"setPrincipalForm\">\n                <el-form-item prop=\"deptName\">\n                  <el-select\n                      style=\"width: 90%\"\n                      v-model=\"setPrincipalForm.userIds\"\n                      multiple\n                      filterable\n                      remote\n                      reserve-keyword\n                      collapse-tags\n                      placeholder=\"请输入姓名或账号以搜索...\"\n                      @change=\"change\"\n                      :remote-method=\"remoteMethod\"\n                      :loading=\"loading\">\n                    <el-option\n\n                        v-for=\"item in options\"\n                        :disabled=\"item.disabled\"\n                        :key=\"item.userId\"\n                        :label=\"item.realName+'-'+item.account\"\n                        :value=\"item.userId\">\n                    </el-option>\n                  </el-select>\n                </el-form-item>\n              </el-form>\n\n            </div>\n            <div class=\"set-principal-dialog-right\">\n\n              <div class=\"set-principal-dialog-right-top\">\n                <h3>已选择人员:</h3>\n                <el-tag v-for=\"name in selectNames\" :key=\"name\" type=\"info\">{{ name }}</el-tag>\n              </div>\n              <div class=\"set-principal-dialog-right-bottom\">\n                <h3>已有人员:</h3>\n                <el-tag v-for=\"info in selectedNames\" closable @close=\"closeTag(info.myUserId)\" :key=\"info.baseInfoId\"\n                        type=\"success\">{{ info.realName }}\n                </el-tag>\n              </div>\n\n\n            </div>\n          </div>\n\n\n          <div slot=\"footer\" class=\"dialog-footer\">\n            <el-button type=\"primary\" @click=\"submitPrincipalDept\" :disabled=\"selectNames.length<1\"\n            >确定\n            </el-button\n            >\n            <el-button @click=\"dialogSetPrincipalVisible = false\">取 消</el-button>\n          </div>\n        </el-dialog>\n\n\n      </div>\n    </div>\n    <div class=\"user-main-right\">\n      <div class=\"user-tool\" v-if=\"deptData[0].canEdit == 1\">\n        <div>\n          <el-button type=\"success\" @click=\"addUserPanel = !addUserPanel\"\n          >添加用户<i class=\"el-icon-circle-plus el-icon--right\"></i\n          ></el-button>\n          <el-button type=\"primary\"\n          >批量导入<i class=\"el-icon-upload el-icon--right\"></i\n          ></el-button>\n        </div>\n      </div>\n      <div class=\"user-content\">\n        <div v-if=\"addUserPanel\">\n          <el-table\n              max-height=\"750px\"\n              :data=\"\n              tableData.filter(\n                (data) =>\n                  !search ||\n                  data.realName.toLowerCase().includes(search.toLowerCase())\n              )\n            \"\n              style=\"width: 95%; margin: 0 auto\"\n          >\n            <el-table-column label=\"账号\" prop=\"account\"></el-table-column>\n            <el-table-column label=\"姓名\" prop=\"realName\"></el-table-column>\n            <el-table-column label=\"性别\">\n              <template slot-scope=\"scope\">\n                {{ scope.row.gender == 0 ? \"女\" : \"男\" }}\n              </template>\n            </el-table-column>\n\n            <el-table-column label=\"与户主关系\">\n              <template slot-scope=\"scope\">\n                {{ scope.row.relation }}\n                <i\n                    v-if=\"scope.row.host\"\n                    class=\"el-icon-s-custom\"\n                    style=\"color: wheat\"\n                ></i>\n              </template>\n            </el-table-column>\n\n            <el-table-column label=\"手机\" prop=\"phone\"></el-table-column>\n            <el-table-column label=\"地址\" prop=\"addr\"></el-table-column>\n            <el-table-column label=\"组织\" prop=\"deptName\"></el-table-column>\n\n            <el-table-column align=\"right\">\n              eslint-disable\n              <!--   eslint-disable       -->\n              <template slot=\"header\" slot-scope=\"scope\">\n                <el-input\n                    v-model=\"search\"\n                    size=\"mini\"\n                    placeholder=\"输入姓名搜索\"/>\n              </template>\n              <!--   eslint-disable       -->\n              <template slot-scope=\"scope\">\n                <el-button\n                    size=\"mini\"\n                    round\n                    @click=\"handleEdit(scope.$index, scope.row)\">编辑\n                </el-button>\n                <el-button\n                    v-if=\"deptData[0].canEdit == 1\"\n                    size=\"mini\"\n                    type=\"danger\"\n                    round\n                    @click=\"handleDelete(scope.$index, scope.row)\">删除\n                </el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </div>\n        <div v-else class=\"add-user\">\n          <el-form :model=\"addUserForm\" :rules=\"rules\" ref=\"addUserForm\" label-width=\"120px\" class=\"demo-ruleForm\">\n            <el-form-item label=\"账号\" prop=\"username\">\n              <el-input v-model=\"addUserForm.username\"></el-input>\n            </el-form-item>\n\n            <el-form-item label=\"真实姓名\" prop=\"realName\">\n              <el-input v-model=\"addUserForm.realName\"></el-input>\n            </el-form-item>\n\n            <el-form-item label=\"组织架构\" prop=\"dept\">\n              <el-cascader\n                  v-model=\"addUserForm.dept\"\n                  :options=\"deptData\"\n                  :props=\"{ expandTrigger: 'hover',\n                   checkStrictly: true,\n                   value:'id',\n\n                   }\"\n              ></el-cascader>\n            </el-form-item>\n\n\n            <el-form-item label=\"手机\" prop=\"phone\">\n              <el-input v-model=\"addUserForm.phone\"></el-input>\n            </el-form-item>\n\n            <el-form-item label=\"性别\" prop=\"gender\">\n              <el-switch\n                  v-model=\"addUserForm.gender\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#ff4949\"\n                  active-text=\"男\"\n                  inactive-text=\"女\">\n              </el-switch>\n            </el-form-item>\n\n            <el-form-item label=\"住址\" prop=\"addr\">\n              <el-input v-model=\"addUserForm.addr\"></el-input>\n            </el-form-item>\n\n            <el-form-item label=\"是否户主\" prop=\"isHost\">\n              <el-switch\n                  v-model=\"addUserForm.isHost\"\n                  active-color=\"#13ce66\"\n                  inactive-color=\"#ff4949\"\n                  active-text=\"是\"\n                  inactive-text=\"否\">\n              </el-switch>\n            </el-form-item>\n            <el-form-item label=\"与户主关系\" prop=\"relation\">\n              <el-input :disabled=\"addUserForm.isHost\" v-model=\"addUserForm.relation\"></el-input>\n            </el-form-item>\n\n            <el-form-item>\n              <el-button type=\"primary\" @click=\"submitForm('addUserForm')\">立即创建</el-button>\n              <el-button @click=\"resetForm('addUserForm')\">重置</el-button>\n            </el-form-item>\n\n\n          </el-form>\n        </div>\n\n      </div>\n\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport instance from \"@/request/request.js\";\n\nexport default {\n  data() {\n    return {\n      allLoading:true,\n      search: \"\",\n      defaultProps: {\n        children: \"children\",\n        label: \"label\",\n        value: \"id\",\n      },\n      deptData: [],\n      tableData: [],\n      ids: [],\n      addUserPanel: true,\n      addUserForm: {\n        username: \"\",\n        realName: \"\",\n        phone: \"\",\n        gender: true,\n        addr: \"\",\n        isHost: false,\n        relation: this.isHost ? \"户主\" : \"\",\n        dept: [],\n      },\n      rules: {\n        username: [\n          {required: true, message: \"请输入账号\", trigger: \"blur\"},\n          {\n            min: 5,\n            max: 20,\n            message: \"长度在 5 到 20 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n\n        realName: [\n          {required: true, message: \"请输入姓名\", trigger: \"blur\"},\n          {\n            min: 2,\n            max: 10,\n            message: \"长度在 2 到 10 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n        dept: [{required: true, message: \"请选择部门\", trigger: \"change\"}],\n        phone: [\n          {required: true, message: \"请输入手机\", trigger: \"blur\"},\n          {\n            pattern: /^1[34578]\\d{9}$/,\n            message: \"目前只支持中国大陆的手机号码\",\n          },\n        ],\n        addr: [\n          {required: true, message: \"请输入住址\", trigger: \"blur\"},\n          {\n            min: 2,\n            max: 30,\n            message: \"长度在 2 到 30 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n        relation: [{required: true, message: \"请输入住址\", trigger: \"blur\"}],\n      },\n      deptRule: {\n        deptName: [\n          {required: true, message: \"请输入部门名称\", trigger: \"blur\"},\n          {\n            min: 2,\n            max: 20,\n            message: \"长度在 2 到 20 个字符\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n      dialogFormVisible: false,\n      dialogUpdateVisible: false,\n      dialogSetPrincipalVisible: false,\n      deptForm: {\n        deptName: \"\",\n        deptParentId: 0,\n      },\n      updateDeptForm: {\n        deptId: 0,\n        deptName: ''\n      },\n      setPrincipalForm: {\n        deptId: 0,\n        userIds: []\n      },\n      options: [],\n      loading: false,\n      selectNames: [],\n      selectedNames: []\n    };\n  },\n  watch: {\n    \"addUserForm.isHost\": {\n      handler(newName, oldName) {\n        if (newName) {\n          this.addUserForm.relation = \"户主\";\n        }\n        if (oldName) {\n          this.addUserForm.relation = \"\";\n        }\n      },\n      deep: true,\n      immediate: true,\n    },\n  },\n  methods: {\n    handleEdit() {\n    },\n    handleDelete() {\n    },\n    handleNodeClick(node) {\n      this.ids = [];\n      this.ids.push(node.id);\n      this.getUserByDeptId();\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          instance\n              .post(\"user/addUser\", this.addUserForm)\n              .then((res) => {\n                if (res.data.code == 200) {\n                  this.$message.success(\"添加成功\");\n                  this.addUserPanel = !this.addUserPanel;\n                  this.getUserByDeptId();\n                }\n              })\n              .catch((err) => {\n                console.log(err);\n              });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n    getUserByDeptId() {\n      instance.post(\"/user/getUserByDeptId\", this.ids).then((res) => {\n        if (res.data.data) this.tableData = res.data.data;\n      });\n    },\n\n    append(data) {\n      this.dialogFormVisible = true;\n      this.deptForm.deptParentId = data.data.id;\n      // const newChild = { id: id++, label: 'testtest', children: [] };\n      // if (!data.children) {\n      //   this.$set(data, 'children', []);\n      // }\n      // data.children.push(newChild);\n    },\n    submitAddDept(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          instance\n              .post(\"dept/addDept\", this.deptForm)\n              .catch((err) => {\n                console.log(err);\n              })\n              .then((res) => {\n                if (res.data.code == 200) {\n                  this.dialogFormVisible = false;\n                  this.$message({\n                    message: \"添加成功\",\n                    type: \"success\",\n                  });\n                  this.deptForm.deptParentId = 0;\n                  this.deptForm.deptName = \"\";\n                  this.getTree();\n                } else {\n                  this.$message.error(res.data.message);\n                }\n              });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    submitUpdateDept(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          instance.post(\"/dept/updateName\", this.updateDeptForm).then(\n              res => {\n                if (res.data.code == 200) {\n                  this.$message.success(\"修改成功\")\n                  this.dialogUpdateVisible = false;\n                  this.getTree()\n                } else {\n                  this.$message.error(res.data.message)\n                }\n              }\n          ).catch(\n              err => {\n                console.log(err);\n              }\n          )\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n\n      })\n    },\n\n    remove(node) {\n      instance\n          .get(\"/dept/deleteDept/\" + node.data.id)\n          .then((res) => {\n            if (res.data.code == 200) {\n              this.$message({\n                message: \"删除成功\",\n                type: \"success\",\n              });\n              this.getTree();\n            } else {\n              this.$message.error(res.data.message);\n            }\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n    },\n    getTree() {\n      instance\n          .get(\"/dept/getTree\")\n          .then((res) => {\n            this.deptData = res.data.data;\n            this.allLoading = false\n          })\n          .catch((err) => {\n            console.log(err);\n          });\n    },\n\n    handleDrop(draggingNode, dropNode, dropType) {\n      let deptId = draggingNode.data.id;\n      let newParentId = dropNode.data.id;\n      if (dropType == \"inner\") {\n        instance\n            .get(\"/dept/updateDept/\" + deptId + \"/\" + newParentId + \"/\" + 1)\n            .catch((err) => {\n              console.log(err);\n            })\n            .then((res) => {\n              if (res.data.code == 200) {\n                this.getTree();\n              }\n            });\n      } else if (\n          draggingNode.data.deptLevel == 2 &&\n          dropNode.data.deptLevel == 2\n      ) {\n        instance\n            .get(\"/dept/updateDept/\" + deptId + \"/\" + newParentId + \"/\" + 2)\n            .catch((err) => {\n              console.log(err);\n            })\n            .then((res) => {\n              if (res.data.code == 200) {\n                this.getTree();\n              }\n            });\n      } else if (\n          draggingNode.data.deptLevel == 3 &&\n          dropNode.data.deptLevel == 3\n      ) {\n        instance\n            .get(\"/dept/updateDept/\" + deptId + \"/\" + newParentId + \"/\" + 2)\n            .catch((err) => {\n              console.log(err);\n            })\n            .then((res) => {\n              if (res.data.code == 200) {\n                this.getTree();\n              }\n            });\n      }\n    },\n    allowDrop(draggingNode, dropNode, type) {\n      if (draggingNode.data.deptLevel == 2) {\n        if (dropNode.data.deptLevel == 1) {\n          return type == \"inner\";\n        }\n        if (dropNode.data.deptLevel == 2) {\n          return type === \"prev\" || type === \"next\";\n        }\n        return false;\n      }\n\n      if (draggingNode.data.deptLevel == 1) {\n        if (dropNode.data.deptLevel == 1) {\n          return type == \"prev\" || type == \"next\";\n        }\n      }\n\n      if (draggingNode.data.deptLevel == 3) {\n        if (dropNode.data.deptLevel == 2) {\n          return type == \"inner\";\n        }\n        if (dropNode.data.deptLevel == 3) {\n          return type == \"prev\" || type == \"next\";\n        }\n\n        return false;\n      }\n\n      return false;\n    },\n    allowDrag(draggingNode) {\n      if (draggingNode.data.deptLevel == 0) {\n        return false;\n      } else {\n        return true;\n      }\n    },\n    setPrincipal(data) {\n      this.dialogSetPrincipalVisible = true\n      this.setPrincipalForm.deptId = data.id\n      this.getPrincipal()\n      this.setPrincipalForm.userIds = []\n      this.options = []\n    },\n    getPrincipal() {\n      instance.post(\"/dept/getPrincipal/\" + this.setPrincipalForm.deptId).then(\n          res => {\n            if (res.data.code == 200) {\n              this.selectedNames = res.data.data\n            } else {\n              this.$message.error(res.data.message)\n            }\n          }\n      ).catch(\n          err => {\n            console.log(err);\n          }\n      )\n    },\n    closeTag(id) {\n      instance.post(\"/dept/removePrincipal/\" + this.setPrincipalForm.deptId + \"/\" + id).then(\n          res => {\n            if (res.data.code == 200) {\n              this.$message.success(\"移除成功\")\n              this.getPrincipal()\n              this.options = []\n            } else {\n              this.$message.error(res.data.message)\n            }\n          }\n      ).catch(\n          err => {\n            console.log(err);\n          }\n      )\n    },\n    updateName(data) {\n      this.dialogUpdateVisible = true\n      this.updateDeptForm.deptId = data.id;\n      this.updateDeptForm.deptName = data.label;\n    },\n    remoteMethod(key) {\n      this.loading = true\n      instance.get(\"/user/search/\" + this.setPrincipalForm.deptId + '/' + key).then(\n          res => {\n            if (res.data.code == 200) {\n              this.options = res.data.data\n\n            } else {\n              this.$message.error(res.data.message)\n            }\n            this.loading = false\n          }\n      ).catch(\n          err => {\n            console.log(err);\n            this.loading = false\n          }\n      )\n    },\n    change(val) {\n      instance.post(\"/user/getNameById\", {userIds: val}).then(\n          res => {\n            if (res.data.code == 200) {\n              this.selectNames = res.data.data\n            } else {\n              this.$message.error(res.data.message)\n            }\n          }\n      ).catch(\n          err => {\n            console.log(err);\n          }\n      )\n    },\n    submitPrincipalDept() {\n      instance.post(\"/dept/setPrincipal\", this.setPrincipalForm).then(\n          res => {\n            if (res.data.code == 200) {\n              this.getPrincipal();\n              this.dialogSetPrincipalVisible = false\n              this.selectNames = []\n              this.$message.success(\"设置成功\")\n            } else {\n              this.$message.error(res.data.message)\n            }\n          }\n      ).catch(\n          err => {\n            console.log(err);\n          }\n      )\n    }\n  },\n  created() {\n    this.getTree();\n    this.getUserByDeptId();\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.user-main {\n  display: flex;\n  height: 100%;\n  border: aliceblue 2px solid;\n  box-sizing: border-box;\n  border-radius: 10px;\n}\n\n.user-main-left {\n  flex: 1;\n  margin-left: 5px;\n  border-right: aliceblue 1px solid;\n  border-radius: 10px;\n  display: flex;\n  flex-direction: column;\n  padding: 5px;\n  margin-top: 10px;\n}\n\n.user-main-right {\n  flex: 5;\n  margin-left: 5px;\n  border-left: aliceblue 1px solid;\n  border-radius: 10px;\n  padding-bottom: 10px;\n  display: flex;\n  flex-direction: column;\n}\n\n.custom-tree-node {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 14px;\n  padding-right: 8px;\n}\n\n.user-tool {\n  flex: 2;\n  display: flex;\n  align-items: center;\n  margin-left: 5%;\n}\n\n.user-content {\n  flex: 18;\n}\n\n.add-user {\n  width: 30%;\n  margin-top: 20px;\n  margin-left: 20px;\n}\n\n.set-principal-dialog {\n  display: flex;\n  height: 300px;\n}\n\n.set-principal-dialog-left {\n  flex: 5;\n  margin-right: 20px;\n  border-right: gray solid 1px;\n}\n\n.set-principal-dialog-right {\n  flex: 5;\n  display: flex;\n  flex-direction: column;\n}\n\n.set-principal-dialog-right-bottom {\n  flex: 5;\n}\n\n.set-principal-dialog-right-top {\n  flex: 5;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=acfe70fa&scoped=true&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\nimport style0 from \"./User.vue?vue&type=style&index=0&id=acfe70fa&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"acfe70fa\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}