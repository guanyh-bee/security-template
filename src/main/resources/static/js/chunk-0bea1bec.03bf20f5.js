(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bea1bec"],{"0761":function(t,e,a){},"25f0":function(t,e,a){"use strict";var s=a("e330"),o=a("5e77").PROPER,r=a("6eeb"),n=a("825a"),i=a("3a9b"),l=a("577e"),m=a("d039"),c=a("ad6d"),u="toString",d=RegExp.prototype,f=d[u],g=s(c),b=m((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),h=o&&f.name!=u;(b||h)&&r(RegExp.prototype,u,(function(){var t=n(this),e=l(t.source),a=t.flags,s=l(void 0===a&&i(d,t)&&!("flags"in d)?g(t):a);return"/"+e+"/"+s}),{unsafe:!0})},"284b":function(t,e,a){"use strict";a("d3b7");var s=a("bc3a"),o=a.n(s),r=a("a18c"),n=a("5c96"),i=o.a.create({baseURL:"http://localhost:8080"});i.interceptors.request.use((function(t){var e=localStorage.getItem("token");return e?t.headers.token=e:r["a"].push("/login"),t}),(function(t){return Promise.reject(t)})),i.interceptors.response.use((function(t){if(t.data.code)switch(t.data.code){case 4004:window.localStorage.removeItem("token"),window.localStorage.removeItem("info"),r["a"].push("/login").catch((function(t){console.log(t)}));break;case 4003:Object(n["Message"])({showClose:!0,message:"权限不足",type:"warning"});break}return t}),(function(t){return Promise.reject(t.response.status)})),e["a"]=i},ad6d:function(t,e,a){"use strict";var s=a("825a");t.exports=function(){var t=s(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},af4b:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"task_item"},[a("div",{staticClass:"task_item_top"},[a("el-row",[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:t.addTaskItem}},[t._v("新增选项")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-edit"},on:{click:t.editTaskItem}},[t._v("编辑选项")]),a("el-popconfirm",{staticStyle:{"margin-left":"8px"},attrs:{title:"确定要删除选中选项吗？"},on:{confirm:t.confirmDeleteItem}},[a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete"},slot:"reference"},[t._v("删除选项")])],1)],1)],1),a("div",{staticClass:"task_item_content"},[a("span",{staticStyle:{"font-weight":"bold"}},[t._v("选项列表:")]),a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"highlight-current-row":""},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"50"}}),a("el-table-column",{attrs:{property:"taskItemName",label:"名称",align:"center"}}),a("el-table-column",{attrs:{label:"是否需要数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:t.row.taskItemNumber?"success":"danger"}},[a("i",{class:t.row.taskItemNumber?"el-icon-success":"el-icon-error"})])]}}])}),a("el-table-column",{attrs:{label:"单位",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span"),a("el-tag",{attrs:{type:e.row.taskItemNumber?"success":"danger"}},[t._v(" "+t._s(e.row.taskItemNumber?e.row.taskItemUnit:"不需要单位")+" ")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"新增选项",visible:t.dialogFormVisible,center:"",width:"30%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"addItemFormData",attrs:{model:t.formData,rules:t.rules}},[a("el-form-item",{attrs:{label:"选项名称","label-width":t.formLabelWidth,prop:"taskItemName"}},[a("el-input",{attrs:{maxlength:"10","show-word-limit":"",placeholder:"请输入名称",autocomplete:"off"},model:{value:t.formData.taskItemName,callback:function(e){t.$set(t.formData,"taskItemName",e)},expression:"formData.taskItemName"}})],1),a("el-form-item",{attrs:{label:"是否需要数量","label-width":t.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.formData.taskItemNumber,callback:function(e){t.$set(t.formData,"taskItemNumber",e)},expression:"formData.taskItemNumber"}})],1),a("el-form-item",{attrs:{label:"单位","label-width":t.formLabelWidth}},[a("el-input",{attrs:{placeholder:t.formData.taskItemNumber?"请输入单位":"单位不可用",disabled:!t.formData.taskItemNumber,autocomplete:"off"},model:{value:t.formData.taskItemUnit,callback:function(e){t.$set(t.formData,"taskItemUnit",e)},expression:"formData.taskItemUnit"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleSure}},[t._v(t._s("insert"==t.commitType?"添加":"修改"))]),a("el-button",{on:{click:t.handleCancel}},[t._v("取 消")])],1)],1)],1)},o=[],r=(a("d3b7"),a("25f0"),a("284b")),n={watch:{formData:{handler:function(t){t.taskItemNumber||(this.formData.taskItemUnit="")},deep:!0}},data:function(){return{tableData:[],formData:{taskItemName:"",taskItemNumber:!1,taskItemUnit:""},commitType:"insert",formLabelWidth:"120px",dialogFormVisible:!1,currentRow:{},rules:{taskItemName:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}]}}},methods:{handleCurrentChange:function(t){this.currentRow=t},confirmDeleteItem:function(){var t=this;null==this.currentRow.taskItemId?this.$message({message:"请先选择需要删除的选项",type:"warning"}):(this.formData=this.currentRow,r["a"].post("/task/deleteItem",this.formData).then((function(e){200==e.data.code?(t.$message({message:"删除成功",type:"success"}),t.getItem(),t.formData={taskItemName:"",taskItemNumber:!1,taskItemUnit:""},t.currentRow={taskItemId:null}):t.$message.error("出错啦!"+e.data.message)})).catch((function(t){console.log(t)})))},addTaskItem:function(){this.commitType="insert",this.dialogFormVisible=!0},editTaskItem:function(){this.commitType="update",console.log(this.currentRow),null==this.currentRow||null==this.currentRow.taskItemId?this.$message({message:"请先选择需要修改的选项",type:"warning"}):(this.dialogFormVisible=!0,this.formData=this.currentRow)},handleCancel:function(){this.dialogFormVisible=!1,this.formData={taskItemName:"",taskItemNumber:!1,taskItemUnit:""}},handleSure:function(){var t=this;this.$refs["addItemFormData"].validate((function(e){e?"insert"==t.commitType?r["a"].post("/task/addItem",t.formData).then((function(e){200==e.data.code?(t.$message({message:"添加成功",type:"success"}),t.getItem(),t.dialogFormVisible=!1,t.formData={taskItemName:"",taskItemNumber:!1,taskItemUnit:""}):t.$message.error("出错啦!"+e.data.message)})).catch((function(e){e.toString(),t.$message.error("出错啦!")})):r["a"].post("/task/editItem",t.formData).then((function(e){200==e.data.code?(t.$message({message:"修改成功",type:"success"}),t.getItem(),t.dialogFormVisible=!1,t.formData={taskItemName:"",taskItemNumber:!1,taskItemUnit:""}):t.$message.error("出错啦!"+e.data.message)})).catch((function(e){e.toString(),t.$message.error("出错啦!")})):console.log("bad submit")}))},getItem:function(){var t=this;r["a"].get("/task/getItem").then((function(e){t.tableData=e.data.data})).catch((function(t){console.log(t)}))}},created:function(){this.getItem()}},i=n,l=(a("f9e1"),a("2877")),m=Object(l["a"])(i,s,o,!1,null,"27fe533b",null);e["default"]=m.exports},f9e1:function(t,e,a){"use strict";a("0761")}}]);
//# sourceMappingURL=chunk-0bea1bec.03bf20f5.js.map